{"ast":null,"code":"var _jsxFileName = \"/Users/reyvipo/Documents/GitHub/titilab/frontend/src/components/ProtectedRoute.js\",\n  _s = $RefreshSig$();\n// frontend/src/components/ProtectedRoute.js\nimport React from \"react\";\nimport { Navigate, useLocation } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction isTokenValid(token) {\n  try {\n    const parts = token.split(\".\");\n    if (parts.length !== 3) return false;\n    const payload = JSON.parse(atob(parts[1]));\n    // si no trae exp por compatibilidad, lo consideramos inv치lido\n    if (!(payload !== null && payload !== void 0 && payload.exp)) return false;\n    return payload.exp * 1000 > Date.now();\n  } catch {\n    return false;\n  }\n}\nfunction ProtectedRoute({\n  children\n}) {\n  _s();\n  const location = useLocation();\n  const token = localStorage.getItem(\"token\");\n  if (!token || !isTokenValid(token)) {\n    // limpia tokens inv치lidos/expirados\n    localStorage.removeItem(\"token\");\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/admin-login\",\n      replace: true,\n      state: {\n        from: location\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 12\n    }, this);\n  }\n  return children;\n}\n_s(ProtectedRoute, \"pkHmaVRPskBaU4tMJuJJpV42k1I=\", false, function () {\n  return [useLocation];\n});\n_c = ProtectedRoute;\nexport default ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["React","Navigate","useLocation","jsxDEV","_jsxDEV","isTokenValid","token","parts","split","length","payload","JSON","parse","atob","exp","Date","now","ProtectedRoute","children","_s","location","localStorage","getItem","removeItem","to","replace","state","from","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/reyvipo/Documents/GitHub/titilab/frontend/src/components/ProtectedRoute.js"],"sourcesContent":["// frontend/src/components/ProtectedRoute.js\nimport React from \"react\";\nimport { Navigate, useLocation } from \"react-router-dom\";\n\nfunction isTokenValid(token) {\n  try {\n    const parts = token.split(\".\");\n    if (parts.length !== 3) return false;\n    const payload = JSON.parse(atob(parts[1]));\n    // si no trae exp por compatibilidad, lo consideramos inv치lido\n    if (!payload?.exp) return false;\n    return payload.exp * 1000 > Date.now();\n  } catch {\n    return false;\n  }\n}\n\nfunction ProtectedRoute({ children }) {\n  const location = useLocation();\n  const token = localStorage.getItem(\"token\");\n\n  if (!token || !isTokenValid(token)) {\n    // limpia tokens inv치lidos/expirados\n    localStorage.removeItem(\"token\");\n    return <Navigate to=\"/admin-login\" replace state={{ from: location }} />;\n  }\n\n  return children;\n}\n\nexport default ProtectedRoute;\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,EAAEC,WAAW,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEzD,SAASC,YAAYA,CAACC,KAAK,EAAE;EAC3B,IAAI;IACF,MAAMC,KAAK,GAAGD,KAAK,CAACE,KAAK,CAAC,GAAG,CAAC;IAC9B,IAAID,KAAK,CAACE,MAAM,KAAK,CAAC,EAAE,OAAO,KAAK;IACpC,MAAMC,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACN,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IAC1C;IACA,IAAI,EAACG,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAEI,GAAG,GAAE,OAAO,KAAK;IAC/B,OAAOJ,OAAO,CAACI,GAAG,GAAG,IAAI,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC;EACxC,CAAC,CAAC,MAAM;IACN,OAAO,KAAK;EACd;AACF;AAEA,SAASC,cAAcA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EACpC,MAAMC,QAAQ,GAAGlB,WAAW,CAAC,CAAC;EAC9B,MAAMI,KAAK,GAAGe,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAE3C,IAAI,CAAChB,KAAK,IAAI,CAACD,YAAY,CAACC,KAAK,CAAC,EAAE;IAClC;IACAe,YAAY,CAACE,UAAU,CAAC,OAAO,CAAC;IAChC,oBAAOnB,OAAA,CAACH,QAAQ;MAACuB,EAAE,EAAC,cAAc;MAACC,OAAO;MAACC,KAAK,EAAE;QAAEC,IAAI,EAAEP;MAAS;IAAE;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAC1E;EAEA,OAAOb,QAAQ;AACjB;AAACC,EAAA,CAXQF,cAAc;EAAA,QACJf,WAAW;AAAA;AAAA8B,EAAA,GADrBf,cAAc;AAavB,eAAeA,cAAc;AAAC,IAAAe,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}